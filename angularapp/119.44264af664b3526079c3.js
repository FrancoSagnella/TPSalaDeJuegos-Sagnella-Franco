"use strict";(self.webpackChunktp_sala_juegos=self.webpackChunktp_sala_juegos||[]).push([[119],{7119:(w,m,s)=>{s.r(m),s.d(m,{AuthModule:()=>_});var d=s(8583),g=s(4363),f=s(8239),n=s(665),b=s(8259),l=s.n(b),t=s(3018),p=s(7556),h=s(1343);function x(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw().seleccionarUsuario(i.data.correo,i.data.clave)}),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()}if(2&e){const o=a.$implicit;t.xp6(2),t.Oqu(o.data.correo)}}const v=function(){return["/auth/register"]},Z=function(){return["/auth/login"]},y=[{path:"**",redirectTo:"auth/login",pathMatch:"full"},{path:"login",component:(()=>{class e{constructor(o,r,u){this.authSvc=o,this.router=r,this.firestore=u,this.loginForm=new n.cw({email:new n.NI(""),password:new n.NI("")}),this.users=[]}ngOnInit(){this.firestore.obtenerTodos("usuarios").subscribe(o=>{this.users=[],o.forEach(r=>{this.users.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}onLogin(){var o=this;return(0,f.Z)(function*(){const{email:r,password:u}=o.loginForm.value;try{const i=yield o.authSvc.login(r,u);if("string"!=typeof i){o.router.navigateByUrl("/home"),l().fire("Iniciaste sesion!","Login exitoso","success");let c=new Date;o.firestore.crear("logs",{mensaje:"El usuario "+r+" ha inicado sesion",fecha:c.getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear()+" a las "+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()})}else l().fire(i,"Algo sali\xf3 mal","error")}catch(i){console.log(i)}})()}guardarMensaje(o){this.firestore.guardarMensajeFirestore(o.email+" inicio sesion a la hora "+(new Date).getDate())}seleccionarUsuario(o,r){this.loginForm.setValue({email:o,password:r})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.e),t.Y36(g.F0),t.Y36(h.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:21,vars:4,consts:[[1,"wrapper"],[1,"container"],[1,"row"],[1,"col-12","col-md-2"],[1,"col-12","col-md-4"],[1,"form-signin",3,"formGroup","ngSubmit"],[1,"form-signin-heading"],["type","text","name","username","placeholder","Ingres\xe1 tu email","required","","autofocus","","formControlName","email",1,"form-control"],["type","password","name","password","placeholder","Ingres\xe1 tu contrase\xf1a","required","","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block"],[3,"routerLink"],[1,"form-signin"],["class","div-user",3,"click",4,"ngFor","ngForOf"],[1,"div-user",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"form",5),t.NdJ("ngSubmit",function(){return r.onLogin()}),t.TgZ(6,"h2",6),t._uU(7,"Inici\xe1 Sesi\xf3n!"),t.qZA(),t._UZ(8,"input",7),t._UZ(9,"input",8),t.TgZ(10,"button",9),t._uU(11,"Iniciar sesi\xf3n"),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"a",10),t._uU(14," No ten\xe9s cuenta? Registrate "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",11),t.TgZ(17,"h2",6),t._uU(18,"Inici\xe1 R\xe1pido!"),t.qZA(),t.YNc(19,x,3,1,"div",12),t.qZA(),t.qZA(),t._UZ(20,"div",3),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(5),t.Q6J("formGroup",r.loginForm),t.xp6(8),t.Q6J("routerLink",t.DdM(3,v)),t.xp6(6),t.Q6J("ngForOf",r.users))},directives:[n._Y,n.JL,n.sg,n.Fj,n.Q7,n.JJ,n.u,g.yS,d.sg],styles:["body[_ngcontent-%COMP%]{background:rgb(175,175,175)!important}.wrapper[_ngcontent-%COMP%]{margin-top:80px;margin-bottom:80px}.form-signin[_ngcontent-%COMP%]{max-width:380px;padding:15px 35px 45px;margin:0 auto;background-color:#fff;border:1px solid rgba(0,0,0,.1)}.div-user[_ngcontent-%COMP%]{max-width:380px;padding:15px 35px 7px;margin:0 auto;background-color:#ffffff36;border:1px solid rgba(0,0,0,.1);cursor:pointer}.div-user[_ngcontent-%COMP%]:hover{background:#0275d8;color:#fff}.form-signin-heading[_ngcontent-%COMP%], .checkbox[_ngcontent-%COMP%]{margin-bottom:30px}.checkbox[_ngcontent-%COMP%]{font-weight:normal}.form-control[_ngcontent-%COMP%]{position:relative;font-size:16px;height:auto;padding:10px}input[type=text][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-left-radius:0;border-bottom-right-radius:0}input[type=password][_ngcontent-%COMP%]{margin-bottom:20px;border-top-left-radius:0;border-top-right-radius:0}"]}),e})()},{path:"register",component:(()=>{class e{constructor(o,r,u){this.authSvc=o,this.router=r,this.firestore=u,this.registerForm=new n.cw({email:new n.NI(""),password:new n.NI("")})}ngOnInit(){}onRegister(){var o=this;return(0,f.Z)(function*(){const{email:r,password:u}=o.registerForm.value;try{const i=yield o.authSvc.register(r,u);"string"!=typeof i?(o.firestore.crear("usuarios",{correo:r,clave:u,perfil:"",sexo:""}),o.router.navigateByUrl("/home"),l().fire("Cuenta creada!","Registro exitoso","success")):l().fire(i,"Algo sali\xf3 mal","error")}catch(i){console.log(i)}})()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.e),t.Y36(g.F0),t.Y36(h.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],features:[t._Bn([p.e])],decls:11,vars:3,consts:[[1,"wrapper"],[1,"form-signin",3,"formGroup","ngSubmit"],[1,"form-signin-heading"],["type","text","name","username","placeholder","Ingres\xe1 tu email","required","","autofocus","","formControlName","email",1,"form-control"],["type","password","name","password","placeholder","Ingres\xe1 tu contrase\xf1a","required","","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block"],[3,"routerLink"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t.NdJ("ngSubmit",function(){return r.onRegister()}),t.TgZ(2,"h2",2),t._uU(3,"Registrate!"),t.qZA(),t._UZ(4,"input",3),t._UZ(5,"input",4),t.TgZ(6,"button",5),t._uU(7,"Crear cunenta"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"a",6),t._uU(10," Ya ten\xe9s cuenta? inici\xe1 sesion "),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(1),t.Q6J("formGroup",r.registerForm),t.xp6(8),t.Q6J("routerLink",t.DdM(2,Z)))},directives:[n._Y,n.JL,n.sg,n.Fj,n.Q7,n.JJ,n.u,g.yS],styles:["body[_ngcontent-%COMP%]{background:rgb(175,175,175)!important}.wrapper[_ngcontent-%COMP%]{margin-top:80px;margin-bottom:80px}.form-signin[_ngcontent-%COMP%]{max-width:380px;padding:15px 35px 45px;margin:0 auto;background-color:#fff;border:1px solid rgba(0,0,0,.1)}.form-signin-heading[_ngcontent-%COMP%], .checkbox[_ngcontent-%COMP%]{margin-bottom:30px}.checkbox[_ngcontent-%COMP%]{font-weight:normal}.form-control[_ngcontent-%COMP%]{position:relative;font-size:16px;height:auto;padding:10px}input[type=text][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-left-radius:0;border-bottom-right-radius:0}input[type=password][_ngcontent-%COMP%]{margin-bottom:20px;border-top-left-radius:0;border-top-right-radius:0}"]}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(y)],g.Bz]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,M,n.u5,n.UX]]}),e})()}}]);